// Code generated by RedSock CLI. DO NOT EDIT.

package grpc

import (
	"context"

	errors "github.com/Red-Sock/trace-errors"
	pb "github.com/godverv/makosh/pkg/makosh_be"

	"github.com/godverv/Velez/internal/config"
)

func NewMakoshBeAPIClient(ctx context.Context, cfg config.Config) (pb.MakoshBeAPIClient, error) {
	connCfg, err := cfg.GetDataSources().GRPC(config.ResourceGrpcMakosh)
	if err != nil {
		return nil, errors.Wrap(err, "couldn't find key"+config.ResourceGrpcMakosh+" grpc connection in config")
	}

	conn, err := connect(ctx, connCfg)
	if err != nil {
		return nil, errors.Wrap(err, "error connection to "+connCfg.Module)
	}

	return pb.NewMakoshBeAPIClient(conn), nil
}
